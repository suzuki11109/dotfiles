yabai -m signal --add event=dock_did_restart action="sudo yabai --load-sa"
sudo yabai --load-sa

yabai -m config layout float

# yabai -m config --space 1 layout stack
# yabai -m config --space 4 layout stack

# yabai -m config mouse_drop_action   stack

# assign applications into spaces
yabai -m rule --add app="^(Calculator|System Settings|App Store)$" manage=off
yabai -m rule --add app="^(Safari|Brave Browser|Mail)$" space=^1
yabai -m rule --add app="Emacs" role="AXTextField" subrole="AXStandardWindow" manage=on space=^2
yabai -m rule --add app="^Simulator$" manage=on space=^2
yabai -m rule --add app="^(iTerm|Terminal|Ghostty|Visual Studio Code)$" space=^2
yabai -m rule --add app="^(Microsoft Teams|Discord|Basecamp 3|Gather)$" space=^3
yabai -m rule --add app="^(DBeaver|Postman|MongoDB Compass)$" space=^4
yabai -m rule --add app="^(Pages|Numbers|Keynote|Calendar|Finder)$" space=^5
yabai -m rule --add app="^(Music)$" space=^6

# focus remaining windows after close a window
yabai -m signal --add event=window_destroyed action="yabai -m query --windows --window &> /dev/null || yabai -m window --focus mouse"
yabai -m signal --add event=application_terminated action="yabai -m query --windows --window &> /dev/null || yabai -m window --focus mouse"

# raycast integration
yabai -m signal --add event=space_changed action="nohup open -g raycast://extensions/krzysztoff1/yabai/screens-menu-bar?launchType=background > /dev/null 2>&1 &"
